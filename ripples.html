<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clean Water Pool</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #40e0d0;
            height: 100vh;
            overflow: hidden;
            cursor: pointer;
        }

        .ripple {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            animation: ripple-expand 3s ease-out forwards;
        }

        .wave {
            position: absolute;
            width: 200px;
            height: 200px;
            border: 3px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            animation: wave-pulse 2s ease-out forwards;
        }

        @keyframes ripple-expand {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
                border-width: 2px;
                transform: scale(var(--size, 1));
            }
            50% {
                opacity: 0.6;
                border-width: 2px;
            }
            100% {
                width: calc(500px * var(--size, 1));
                height: calc(500px * var(--size, 1));
                opacity: 0;
                border-width: 1px;
                transform: scale(var(--size, 1));
            }
        }

        @keyframes wave-pulse {
            0% {
                opacity: 0;
                transform: scale(0);
                border-width: 3px;
            }
            30% {
                opacity: 1;
                border-width: 2px;
            }
            100% {
                opacity: 0;
                transform: scale(3);
                border-width: 1px;
            }
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-size: 16px;
            font-family: Arial, sans-serif;
            padding: 0 20px;
        }

        @media (max-width: 768px) {
            .instructions {
                font-size: 14px;
                bottom: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="instructions" id="instructions">
        Tap or click the water to create ripples â€¢ Hold for concentric waves
    </div>

    <script>
        let lastRippleTime = 0;
        let isMouseDown = false;
        let isTouch = false;
        let multiRippleInterval;

        function createRipple(x, y, size = 1, delay = 0) {
            setTimeout(() => {
                const ripple = document.createElement('div');
                ripple.className = 'ripple';
                // Center the ripple perfectly on the click point
                ripple.style.left = (x - (250 * size)) + 'px';
                ripple.style.top = (y - (250 * size)) + 'px';
                ripple.style.setProperty('--size', size);
                
                document.body.appendChild(ripple);
                
                setTimeout(() => {
                    if (ripple.parentNode) {
                        ripple.parentNode.removeChild(ripple);
                    }
                }, 3000);
            }, delay);
        }

        function createWave(x, y) {
            const wave = document.createElement('div');
            wave.className = 'wave';
            wave.style.left = (x - 100) + 'px';
            wave.style.top = (y - 100) + 'px';
            
            document.body.appendChild(wave);
            
            setTimeout(() => {
                if (wave.parentNode) {
                    wave.parentNode.removeChild(wave);
                }
            }, 2000);
        }

        function startMultiRipples(x, y) {
            if (multiRippleInterval) return;
            
            multiRippleInterval = setInterval(() => {
                // Create perfectly concentric ripples - same center, different timing
                const rippleCount = 4;
                
                for (let i = 0; i < rippleCount; i++) {
                    // All ripples from exact same center, just different delays
                    createRipple(x, y, 1, i * 100); // 100ms apart for concentric effect
                }
            }, 400); // Wait between sets of concentric rings
        }

        function stopMultiRipples() {
            if (multiRippleInterval) {
                clearInterval(multiRippleInterval);
                multiRippleInterval = null;
            }
        }

        // Mouse interactions
        document.body.addEventListener('mousedown', (e) => {
            isMouseDown = true;
            createRipple(e.clientX, e.clientY);
            setTimeout(() => {
                if (isMouseDown) {
                    startMultiRipples(e.clientX, e.clientY);
                }
            }, 300); // Start multi-ripples after 300ms hold
        });

        document.body.addEventListener('mouseup', () => {
            isMouseDown = false;
            stopMultiRipples();
        });

        document.body.addEventListener('mouseleave', () => {
            isMouseDown = false;
            stopMultiRipples();
        });

        document.body.addEventListener('click', (e) => {
            if (!isMouseDown) {
                createRipple(e.clientX, e.clientY);
            }
        });

        document.body.addEventListener('mousemove', (e) => {
            if (isMouseDown && multiRippleInterval) {
                // Update position for multi-ripples
                stopMultiRipples();
                startMultiRipples(e.clientX, e.clientY);
            } else if (Math.random() < 0.1) {
                createWave(e.clientX, e.clientY);
            }
        });

        // Touch interactions
        document.body.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isTouch = true;
            const touch = e.touches[0];
            createRipple(touch.clientX, touch.clientY);
            setTimeout(() => {
                if (isTouch) {
                    startMultiRipples(touch.clientX, touch.clientY);
                }
            }, 300);
        });

        document.body.addEventListener('touchend', (e) => {
            e.preventDefault();
            isTouch = false;
            stopMultiRipples();
        });

        document.body.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            if (isTouch && multiRippleInterval) {
                stopMultiRipples();
                startMultiRipples(touch.clientX, touch.clientY);
            } else if (Math.random() < 0.3) {
                createWave(touch.clientX, touch.clientY);
            }
        });
    </script>
</body>
</html>